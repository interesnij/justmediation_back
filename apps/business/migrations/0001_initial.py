# Generated by Django 3.0.9 on 2025-10-03 10:56

import apps.business.models.matter
import datetime
import dirtyfields.dirtyfields
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import django_fsm
import model_utils.fields
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('cities_light', '0008_city_timezone'),
        ('users', '0001_initial'),
        ('forums', '__first__'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('finance', '__first__'),
    ]

    operations = [
        migrations.CreateModel(
            name='Attachment',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('mime_type', models.CharField(help_text='Mime type of file', max_length=255, verbose_name='Mime type')),
                ('file', models.CharField(blank=True, help_text="Document's file", max_length=255, null=True, verbose_name='File')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='BillingItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_billable', models.BooleanField(default=False, verbose_name='Is billable entry')),
                ('description', models.TextField(help_text='Full description of made work', verbose_name='Description')),
                ('time_spent', models.DurationField(blank=True, help_text='Amount of time that mediator spent on this work', null=True, validators=[django.core.validators.MinValueValidator(datetime.timedelta(seconds=900)), django.core.validators.MaxValueValidator(datetime.timedelta(days=1))], verbose_name='Time Spent')),
                ('hourly_rate', models.DecimalField(decimal_places=2, default=0, help_text='Hourly rate for which time entry is added', max_digits=10, verbose_name='Hourly rate')),
                ('rate', models.DecimalField(decimal_places=2, default=None, help_text='Unit rate for which expense entry is added', max_digits=10, null=True, verbose_name='Rate')),
                ('quantity', models.PositiveIntegerField(default=None, help_text='Quantity of the item for which expense entry is added', null=True, verbose_name='Quantity')),
                ('total_amount', models.DecimalField(decimal_places=2, default=0, help_text='Total amount for which expense entry is added', max_digits=10, verbose_name='Total amount')),
                ('date', models.DateField(help_text='Date in which billed work was made', verbose_name='Date')),
                ('billing_type', models.CharField(choices=[('expense', 'Expense'), ('time', 'Time'), ('flat_fee', 'Flat fee')], default='time', max_length=10, verbose_name='Billing Type')),
                ('attachments', models.ManyToManyField(help_text='Billing item attachments', to='business.Attachment', verbose_name='File')),
                ('billed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='billed_item', to=settings.AUTH_USER_MODEL, verbose_name='Billed by')),
                ('client', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='billed_item', to='users.Client', verbose_name='Client')),
                ('created_by', models.ForeignKey(help_text='AppUser created time billing', on_delete=django.db.models.deletion.PROTECT, related_name='billing_item', to=settings.AUTH_USER_MODEL, verbose_name='Created by')),
                ('currency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='users.Currencies', verbose_name='Currency')),
            ],
            options={
                'verbose_name': 'Billing Item',
                'verbose_name_plural': 'Billing Item',
            },
            bases=(dirtyfields.dirtyfields.DirtyFieldsMixin, models.Model),
        ),
        migrations.CreateModel(
            name='ContactForm',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('name', models.CharField(max_length=255, verbose_name='First name')),
                ('email', models.EmailField(max_length=254, null=True, verbose_name='Email')),
                ('message', models.CharField(max_length=1000, verbose_name='Message')),
                ('status', django_fsm.FSMField(choices=[('active', 'Active'), ('inactive', 'Inactive')], default='active', max_length=15, verbose_name='Status')),
                ('status_modified', models.DateTimeField(default=django.utils.timezone.now, help_text='Datetime when status was modified', verbose_name='Status Modified')),
            ],
            options={
                'verbose_name': 'Message from contact form',
                'verbose_name_plural': 'Messages from contact form',
            },
        ),
        migrations.CreateModel(
            name='InvoiceActivity',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('activity', models.CharField(help_text='Title which describes current activity', max_length=255, null=True, verbose_name='Activity')),
            ],
            options={
                'verbose_name': 'InvoiceActivity',
                'verbose_name_plural': 'InvoiceActivities',
            },
        ),
        migrations.CreateModel(
            name='InvoiceLog',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('status', models.CharField(max_length=20, null=True, verbose_name='Status')),
                ('method', models.CharField(max_length=10, null=True, verbose_name='Method')),
                ('log', models.CharField(help_text='Title which describes current log', max_length=255, null=True, verbose_name='Logs')),
            ],
            options={
                'verbose_name': 'InvoiceLog',
                'verbose_name_plural': 'InvoiceLogs',
            },
        ),
        migrations.CreateModel(
            name='Lead',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('priority', models.CharField(blank=True, choices=[('high', 'High'), ('medium', 'Medium'), ('low', 'Low')], max_length=10, null=True, verbose_name='Lead Priority')),
                ('chat_channel', models.UUIDField(default=uuid.uuid4, unique=True, verbose_name='Chat channel ID')),
                ('status', django_fsm.FSMField(choices=[('active', 'Active'), ('converted', 'Converted')], default='active', max_length=15, verbose_name='Status')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leads', to='users.Client', verbose_name='Client')),
                ('enterprise', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='leads', to='users.Enterprise', verbose_name='Enterprises')),
                ('mediator', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='leads', to='users.Mediator', verbose_name='Mediator')),
                ('post', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='leads', to='forums.Post', verbose_name='Post')),
            ],
            options={
                'verbose_name': 'Lead',
                'verbose_name_plural': 'Leads',
            },
        ),
        migrations.CreateModel(
            name='Matter',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('code', models.CharField(default=apps.business.models.matter.create_matter_code, help_text='Simple alphabetical code (identifier) of a matter', max_length=25, verbose_name='Code')),
                ('title', models.CharField(max_length=255, verbose_name='Title')),
                ('start_date', models.DateField(blank=True, null=True, verbose_name='Start date')),
                ('close_date', models.DateField(blank=True, null=True, verbose_name='Close date')),
                ('description', models.TextField(help_text='Extra matter description', verbose_name='Description')),
                ('rate', models.CharField(help_text='Amount of money taken for a rate type in $', max_length=50, verbose_name='Rate')),
                ('is_billable', models.BooleanField(default=False, verbose_name='Is billable')),
                ('fee_note', models.TextField(default='', max_length=255, verbose_name='Fee note')),
                ('status', django_fsm.FSMField(choices=[('open', 'Open'), ('referral', 'Referral'), ('close', 'Close')], default='open', max_length=15, verbose_name='Status')),
                ('completed', models.DateTimeField(blank=True, help_text='Datetime when the matter was completed(closed)', null=True, verbose_name='Completed datetime')),
                ('city', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='matters', to='cities_light.City', verbose_name='City')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='matters', to='users.Client', verbose_name='Client')),
                ('country', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='matters', to='cities_light.Country', verbose_name='Country')),
                ('currency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='users.Currencies', verbose_name='Currency')),
                ('fee_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='users.FeeKind', verbose_name='Fee type')),
                ('invite', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='matters', to='users.Invite', verbose_name='Invite')),
                ('lead', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='matters', to='business.Lead', verbose_name='Lead')),
                ('mediator', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='matters', to='users.Mediator', verbose_name='Mediator')),
            ],
            options={
                'verbose_name': 'Matter',
                'verbose_name_plural': 'Matters',
            },
        ),
        migrations.CreateModel(
            name='MatterComment',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('seen', models.BooleanField(default=False, help_text='If the matter comment has been read or not', verbose_name='Seen')),
                ('seen_by_client', models.BooleanField(default=False, help_text='If the matter topic has been read or not by client', verbose_name='Seen')),
                ('text', models.TextField(verbose_name='Text of the post')),
                ('attachments', models.ManyToManyField(related_name='matter_comments', to='business.Attachment', verbose_name='Attachments')),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='matter_comments', to=settings.AUTH_USER_MODEL, verbose_name='Author')),
                ('deleted_participants', models.ManyToManyField(related_name='matter_comments_deleted_pariticipants', to=settings.AUTH_USER_MODEL, verbose_name='Deleted Participants')),
                ('participants', models.ManyToManyField(related_name='matter_comments_pariticipants', to=settings.AUTH_USER_MODEL, verbose_name='Participants')),
            ],
            options={
                'verbose_name': 'Matter Message Comment',
                'verbose_name_plural': 'Matter Message Comments',
            },
        ),
        migrations.CreateModel(
            name='PaymentMethods',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('title', models.CharField(help_text='Payment methods', max_length=30, verbose_name='Title')),
            ],
            options={
                'verbose_name': 'PaymentMethod',
                'verbose_name_plural': 'PaymentMethods',
            },
        ),
        migrations.CreateModel(
            name='PostedMatter',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('title', models.CharField(max_length=255, verbose_name='Title')),
                ('budget_min', models.CharField(max_length=50, verbose_name='Budget Min')),
                ('budget_max', models.CharField(max_length=50, verbose_name='Budget Max')),
                ('budget_type', models.CharField(choices=[('hourly', 'Hourly'), ('flat_fee', 'Flat Fee'), ('contingency_fee', 'Contingency Fee'), ('other', 'Other Fee')], default='hourly', max_length=25, verbose_name='Budget type')),
                ('budget_detail', models.TextField(blank=True, help_text='Budget description', null=True, verbose_name='Budget description')),
                ('description', models.TextField(help_text='Extra matter description', verbose_name='Description')),
                ('status', django_fsm.FSMField(choices=[('active', 'Active'), ('inactive', 'Inactive')], default='active', max_length=15, verbose_name='Status')),
                ('status_modified', models.DateTimeField(default=django.utils.timezone.now, help_text='Datetime when status was modified', verbose_name='Status Modified')),
                ('is_hidden_for_client', models.BooleanField(default=False, verbose_name='Hidden for client')),
                ('is_hidden_for_mediator', models.BooleanField(default=False, verbose_name='Hidden for mediator')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='posted_matters', to='users.Client', verbose_name='Client')),
                ('currency', models.ForeignKey(default=1, on_delete=django.db.models.deletion.PROTECT, related_name='posted_matters', to='users.Currencies', verbose_name='Currency')),
                ('practice_area', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='posted_matter', to='forums.ForumPracticeAreas', verbose_name='Related practice area')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='VideoCall',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('call_id', models.UUIDField(default=uuid.uuid4, help_text='Id of call(name of room in jitsi)', unique=True, verbose_name='Id of call')),
                ('participants', models.ManyToManyField(related_name='video_calls', to=settings.AUTH_USER_MODEL, verbose_name='Participants')),
            ],
            options={
                'verbose_name': 'Video Call',
                'verbose_name_plural': 'Video Calls',
            },
        ),
        migrations.CreateModel(
            name='TimeEntry',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('start_time', models.DateTimeField(verbose_name='Start time')),
                ('end_time', models.DateTimeField(null=True, verbose_name='End time')),
                ('billing_item', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='time_entries', to='business.BillingItem', verbose_name='Billing Item')),
                ('created_by', models.ForeignKey(help_text='AppUser created time billing', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='time_entries', to=settings.AUTH_USER_MODEL, verbose_name='Created by')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Stage',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('title', models.CharField(max_length=255, verbose_name='Title')),
                ('mediator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='stages', to='users.Mediator', verbose_name='Mediator')),
            ],
            options={
                'verbose_name': 'Stage',
                'verbose_name_plural': 'Stages',
            },
        ),
        migrations.CreateModel(
            name='Referral',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('message', models.TextField(blank=True, help_text='Referral message', null=True, verbose_name='Message')),
                ('mediator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='referral', to='users.Mediator', verbose_name='Mediator')),
            ],
            options={
                'verbose_name': 'Referral',
                'verbose_name_plural': 'Referrals',
            },
        ),
        migrations.CreateModel(
            name='Proposal',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('rate', models.CharField(max_length=50, verbose_name='rate')),
                ('rate_type', models.CharField(choices=[('hourly', 'Hourly'), ('flat_fee', 'Flat Fee'), ('contingency_fee', 'Contingency Fee'), ('other', 'Other Fee')], default='hourly', max_length=25, verbose_name='Rate type')),
                ('rate_detail', models.TextField(blank=True, help_text='Rate description', null=True, verbose_name='Rate description')),
                ('description', models.TextField(help_text='Proposal description', verbose_name='Description')),
                ('status', django_fsm.FSMField(choices=[('pending', 'Pending'), ('accepted', 'Accepted'), ('revoked', 'Revoked'), ('chat', 'Chat'), ('withdrawn', 'withdrawn'), ('closed by client', 'closed by client')], default='pending', max_length=20, verbose_name='Status')),
                ('status_modified', models.DateTimeField(default=django.utils.timezone.now, help_text='Datetime when status was modified', verbose_name='Status Modified')),
                ('is_hidden_for_client', models.BooleanField(default=False, verbose_name='Hidden for client')),
                ('is_hidden_for_mediator', models.BooleanField(default=False, verbose_name='Hidden for mediator')),
                ('currency', models.ForeignKey(default=1, on_delete=django.db.models.deletion.PROTECT, related_name='proposals', to='users.Currencies', verbose_name='Currency')),
                ('mediator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='proposals', to='users.Mediator', verbose_name='Mediator')),
                ('post', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='proposals', to='business.PostedMatter', verbose_name='Posted Matter')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Opportunity',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('chat_channel', models.UUIDField(default=uuid.uuid4, unique=True, verbose_name='Chat channel ID')),
                ('priority', models.CharField(blank=True, choices=[('high', 'High'), ('medium', 'Medium'), ('low', 'Low')], max_length=10, null=True, verbose_name='Opportunity Priority')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='opportunities', to='users.Client', verbose_name='Client')),
                ('mediator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='opportunities', to='users.Mediator', verbose_name='Mediator')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Note',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('title', models.CharField(max_length=255, verbose_name='Title')),
                ('text', models.TextField(verbose_name='Text')),
                ('attachments', models.ManyToManyField(related_name='notes', to='business.Attachment', verbose_name='Attachments')),
                ('client', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notes_client', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(help_text='AppUser created the note', on_delete=django.db.models.deletion.PROTECT, related_name='notes', to=settings.AUTH_USER_MODEL, verbose_name='Created by')),
                ('matter', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notes', to='business.Matter')),
            ],
            options={
                'verbose_name': 'Note',
                'verbose_name_plural': 'Notes',
            },
        ),
        migrations.CreateModel(
            name='MediatorRFP',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('open_submission', models.DateTimeField(blank=True, null=True, verbose_name='Open submission')),
                ('close_submission', models.DateTimeField(blank=True, null=True, verbose_name='Close submission')),
                ('dedline_open_submission', models.DateTimeField(blank=True, null=True, verbose_name='Dedline Open submission')),
                ('dedline_close_submission', models.DateTimeField(blank=True, null=True, verbose_name='Dedline Open submission')),
                ('documents', models.TextField(blank=True, null=True, verbose_name='Documents')),
                ('description', models.CharField(blank=True, max_length=1000, null=True, verbose_name='Description')),
                ('mediators_count', models.CharField(blank=True, max_length=50, null=True, verbose_name='Number of mediators Needed')),
                ('location', models.CharField(blank=True, max_length=500, null=True, verbose_name='Location')),
                ('location_license_admissions', models.CharField(blank=True, max_length=500, null=True, verbose_name='Location license admissions')),
                ('no_conflict', models.BooleanField(default=False, verbose_name='no conflict?')),
                ('review_draft_negatiate', models.BooleanField(default=False, verbose_name='review draft negatiate?')),
                ('advise_individual_labor', models.BooleanField(default=False, verbose_name='advise individual labor?')),
                ('advise_individual', models.BooleanField(default=False, verbose_name='advise individual?')),
                ('mediator_can_accept_responsibility', models.BooleanField(default=False, verbose_name='mediator can accept responsibility?')),
                ('anticipated_contract_period_enabled', models.BooleanField(default=False, verbose_name='anticipated contract period enabled?')),
                ('fee_structure_enabled', models.BooleanField(default=False, verbose_name='fee structure enabled?')),
                ('dedlain_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='mediator_dedlain_user', to=settings.AUTH_USER_MODEL, verbose_name='Dedlain user')),
                ('inquiries_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='mediator_inquiries_user', to=settings.AUTH_USER_MODEL, verbose_name='Inquiries user')),
                ('mediators', models.ManyToManyField(related_name='mediator_rfp_mediators', to=settings.AUTH_USER_MODEL, verbose_name='mediator Credentials for Aforementioned requirements')),
                ('respond_mediators', models.ManyToManyField(related_name='respond_mediator_rfp_mediators', to=settings.AUTH_USER_MODEL, verbose_name='mediator Qualities for Aforementioned requirements')),
                ('scope_of_services', models.ManyToManyField(blank=True, null=True, related_name='mediator_scope_of_services', to='users.Speciality', verbose_name='SCOPE OF SERVICES')),
                ('specialities', models.ManyToManyField(blank=True, null=True, related_name='mediator_client_specialities', to='users.Speciality', verbose_name='Practice Area where help needed')),
            ],
            options={
                'verbose_name': 'mediator RFP',
                'verbose_name_plural': 'mediator RFP',
            },
        ),
        migrations.CreateModel(
            name='MatterSharedWith',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('matter', models.ForeignKey(help_text='Matter that was shared with mediator', on_delete=django.db.models.deletion.CASCADE, related_name='shared_links', to='business.Matter', verbose_name='Matter')),
                ('user', models.ForeignKey(help_text='User with which matter was shared', on_delete=django.db.models.deletion.CASCADE, related_name='shared_links', to=settings.AUTH_USER_MODEL, verbose_name='User')),
            ],
            options={
                'verbose_name': 'Matter Shared With',
                'verbose_name_plural': 'Matters Shared With',
                'unique_together': {('matter', 'user')},
            },
        ),
        migrations.CreateModel(
            name='MatterPost',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('title', models.CharField(max_length=255, null=True, verbose_name='Title')),
                ('comment_count', models.IntegerField(default=0, verbose_name='Comment count')),
                ('seen', models.BooleanField(default=False, help_text='If the matter topic has been read or not', verbose_name='Seen')),
                ('seen_by_client', models.BooleanField(default=False, help_text='If the matter topic has been read or not by client', verbose_name='Seen')),
                ('attachments', models.ManyToManyField(related_name='matter_topic', to='business.Attachment', verbose_name='Attachments')),
                ('last_comment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='last_comment_on_post', to='business.MatterComment', verbose_name='Last Comment')),
                ('matter', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='posts', to='business.Matter')),
                ('participants', models.ManyToManyField(related_name='matter_topic', to=settings.AUTH_USER_MODEL, verbose_name='Participants')),
            ],
            options={
                'verbose_name': 'Matter Message Post',
                'verbose_name_plural': 'Matter Message Posts',
            },
        ),
        migrations.AddField(
            model_name='mattercomment',
            name='post',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='business.MatterPost', verbose_name='Post'),
        ),
        migrations.AddField(
            model_name='matter',
            name='referral',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='matters', to='business.Referral', verbose_name='Referral'),
        ),
        migrations.AddField(
            model_name='matter',
            name='referral_ignore_mediator',
            field=models.ForeignKey(default=None, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='referral_ignored_matters', to='users.Mediator', verbose_name='Referral Ignore Mediator'),
        ),
        migrations.AddField(
            model_name='matter',
            name='shared_with',
            field=models.ManyToManyField(help_text='Users with which matter is shared', related_name='shared_matters', through='business.MatterSharedWith', to=settings.AUTH_USER_MODEL, verbose_name='Shared with'),
        ),
        migrations.AddField(
            model_name='matter',
            name='speciality',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='users.Speciality', verbose_name='Speciality'),
        ),
        migrations.AddField(
            model_name='matter',
            name='stage',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='matters', to='business.Stage', verbose_name='Stage'),
        ),
        migrations.AddField(
            model_name='matter',
            name='state',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='matters', to='cities_light.Region', verbose_name='State'),
        ),
        migrations.CreateModel(
            name='Invoice',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('payment_status', django_fsm.FSMField(choices=[('not_started', 'Not started'), ('payment_in_progress', 'Payment in progress'), ('payment_failed', 'Payment failed'), ('paid', 'Paid')], default='not_started', help_text='Status of payment', max_length=30, verbose_name='Payment Status')),
                ('number', models.CharField(max_length=15, null=True, verbose_name='Invoice Number')),
                ('invoice_id', models.CharField(max_length=30, null=True, verbose_name='Invoice ID')),
                ('period_start', models.DateField(help_text='Start date from which invoice money amount is calculated', verbose_name='Period start')),
                ('period_end', models.DateField(help_text='End date till which invoice money amount is calculated', verbose_name='Period end')),
                ('title', models.CharField(help_text='Title which describes current invoice', max_length=255, verbose_name='Title')),
                ('status', django_fsm.FSMField(choices=[('overdue', 'Overdue'), ('open', 'Open'), ('paid', 'Paid'), ('voided', 'Voided'), ('draft', 'Draft')], default='draft', help_text='Status of invoice', max_length=30, verbose_name='Status')),
                ('note', models.TextField(blank=True, help_text='A note left by mediator', null=True, verbose_name='Note')),
                ('due_date', models.DateField(blank=True, help_text='The date on which payment for this invoice is due.', null=True, verbose_name='Due Date')),
                ('due_days', models.IntegerField(default=0, help_text='The days on which payment for this invoice is due.', verbose_name='Due days')),
                ('email', models.EmailField(max_length=254, null=True, verbose_name='Invoice Email')),
                ('finalized', models.DateTimeField(blank=True, null=True, verbose_name='Finalized Date')),
                ('tax_rate', models.DecimalField(decimal_places=4, default=None, help_text='Tax rate', max_digits=20, null=True, verbose_name='Tax rate')),
                ('activities', models.ManyToManyField(related_name='invoices', to='business.InvoiceActivity', verbose_name='activities')),
                ('billing_items', models.ManyToManyField(related_name='billing_items_invoices', to='business.BillingItem', verbose_name='billing_items')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='invoices', to='users.Client')),
                ('created_by', models.ForeignKey(help_text='AppUser that created invoice', on_delete=django.db.models.deletion.PROTECT, related_name='invoices', to=settings.AUTH_USER_MODEL, verbose_name='Created by')),
                ('logs', models.ManyToManyField(related_name='invoices', to='business.InvoiceLog', verbose_name='logs')),
                ('matter', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='invoices', to='business.Matter')),
                ('payment', models.OneToOneField(blank=True, help_text='Link to payment', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='invoice', related_query_name='business_invoice', to='finance.Payment', verbose_name='Payment')),
                ('payment_method', models.ManyToManyField(related_name='invoices', to='business.PaymentMethods', verbose_name='Payment methods')),
            ],
            options={
                'verbose_name': 'Invoice',
                'verbose_name_plural': 'Invoices',
            },
            bases=(dirtyfields.dirtyfields.DirtyFieldsMixin, models.Model),
        ),
        migrations.CreateModel(
            name='ClientRFP',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('open_submission', models.DateTimeField(blank=True, null=True, verbose_name='Open submission')),
                ('close_submission', models.DateTimeField(blank=True, null=True, verbose_name='Close submission')),
                ('dedline_open_submission', models.DateTimeField(blank=True, null=True, verbose_name='Dedline Open submission')),
                ('dedline_close_submission', models.DateTimeField(blank=True, null=True, verbose_name='Dedline Open submission')),
                ('individ_date', models.DateTimeField(blank=True, null=True, verbose_name='Individ date')),
                ('documents', models.TextField(blank=True, null=True, verbose_name='Documents')),
                ('description', models.CharField(blank=True, max_length=1000, null=True, verbose_name='Description')),
                ('potencial_client_conflicts', models.CharField(blank=True, max_length=1000, null=True, verbose_name='Potencial Client Conflicts')),
                ('company_or_duns', models.CharField(blank=True, max_length=500, null=True, verbose_name='Company or DUNS')),
                ('who_can_respond_to_rfp', models.CharField(blank=True, max_length=500, null=True, verbose_name='Who Can Respond To RFP')),
                ('responsible_mediator_qualifications', models.CharField(blank=True, max_length=1000, null=True, verbose_name='Responsible mediator Qualifications')),
                ('location_license_admissions', models.CharField(blank=True, max_length=500, null=True, verbose_name='Location license admissions')),
                ('anticipated_period', models.CharField(blank=True, max_length=50, null=True, verbose_name='Anticipated period')),
                ('range_of_packages', models.CharField(blank=True, max_length=50, null=True, verbose_name='Range of packages')),
                ('expected_extention', models.CharField(blank=True, max_length=50, null=True, verbose_name='Expected extention')),
                ('mediators_count', models.CharField(blank=True, max_length=50, null=True, verbose_name='Number of mediators Needed')),
                ('hourly_fee_enabled', models.BooleanField(default=False, verbose_name='hourly fee enabled')),
                ('success_fee_enabled', models.BooleanField(default=False, verbose_name='success fee enabled')),
                ('sliding_scale_fee_enabled', models.BooleanField(default=False, verbose_name='sliding scale fee enabled')),
                ('litigation_funding_enabled', models.BooleanField(default=False, verbose_name='litigation funding enabled')),
                ('retainer_fee_enabled', models.BooleanField(default=False, verbose_name='retainer fee enabled')),
                ('subscription_fee_enabled', models.BooleanField(default=False, verbose_name='subscription fee enabled')),
                ('bended_rate_enabled', models.BooleanField(default=False, verbose_name='bended rate enabled')),
                ('hybrid_fee_enabled', models.BooleanField(default=False, verbose_name='hybrid fee enabled')),
                ('contingency_fee_enabled', models.BooleanField(default=False, verbose_name='contingency fee enabled')),
                ('caped_fee_enabled', models.BooleanField(default=False, verbose_name='caped fee enabled')),
                ('proect_bases_fee_enabled', models.BooleanField(default=False, verbose_name='proect bases fee enabled')),
                ('dedlain_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='dedlain_user', to=settings.AUTH_USER_MODEL, verbose_name='Dedlain user')),
                ('inquiries_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='inquiries_user', to=settings.AUTH_USER_MODEL, verbose_name='Inquiries user')),
                ('license_admissions', models.ManyToManyField(related_name='client_license_admissions', to='users.Speciality', verbose_name='License Requirements & BAR Admissions')),
                ('mediators', models.ManyToManyField(related_name='client_rfp_mediators', to=settings.AUTH_USER_MODEL, verbose_name='mediator Credentials for Aforementioned requirements')),
                ('mediators_specialities', models.ManyToManyField(related_name='client_mediators_specialities', to='users.Speciality', verbose_name='mediators need to be Qualified in Legal Practice')),
                ('scope_of_services', models.ManyToManyField(related_name='client_scope_of_services', to='users.Speciality', verbose_name='SCOPE OF SERVICES')),
                ('specialities', models.ManyToManyField(related_name='rfp_client_specialities', to='users.Speciality', verbose_name='Practice Area where help needed')),
            ],
            options={
                'verbose_name': 'Client RFP',
                'verbose_name_plural': 'Client RFP',
            },
        ),
        migrations.CreateModel(
            name='ChecklistEntry',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('description', models.TextField(help_text='Description of checklist', verbose_name='Description')),
                ('mediator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='checklist', to='users.Mediator', verbose_name='Mediator')),
            ],
            options={
                'verbose_name': 'Checklist Entry',
                'verbose_name_plural': 'Checklist Entries',
            },
        ),
        migrations.CreateModel(
            name='BillingItemAttachment',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('invoice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attached_time_billing', to='business.Invoice', verbose_name='Invoice')),
                ('time_billing', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attached_invoice', to='business.BillingItem', verbose_name='Time Billing')),
            ],
            options={
                'verbose_name': 'Attached Time Billing',
                'verbose_name_plural': 'Attached Time Billings',
            },
        ),
        migrations.AddField(
            model_name='billingitem',
            name='invoices',
            field=models.ManyToManyField(related_name='time_billing', through='business.BillingItemAttachment', to='business.Invoice', verbose_name='Invoices'),
        ),
        migrations.AddField(
            model_name='billingitem',
            name='matter',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='billing_item', to='business.Matter', verbose_name='Matter'),
        ),
        migrations.CreateModel(
            name='Activity',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('title', models.CharField(help_text='Title which describes current activity', max_length=255, verbose_name='Title')),
                ('type', models.CharField(blank=True, choices=[('message', 'Message'), ('document', 'Document'), ('note', 'Note'), ('invoice', 'Invoice'), ('billing_item', 'Billing item')], default=None, max_length=25, null=True, verbose_name='Activity type')),
                ('matter', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='business.Matter')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='activities', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Activity',
                'verbose_name_plural': 'Activities',
            },
        ),
        migrations.CreateModel(
            name='VoiceConsent',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('title', models.CharField(max_length=255, verbose_name='Title')),
                ('file', models.CharField(blank=True, help_text="Voice consent's file", max_length=255, null=True, verbose_name='File')),
                ('matter', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='voice_consents', to='business.Matter')),
            ],
            options={
                'verbose_name': 'Voice Consent',
                'verbose_name_plural': 'Voice Consents',
                'unique_together': {('matter', 'title')},
            },
        ),
        migrations.AddConstraint(
            model_name='matter',
            constraint=models.CheckConstraint(check=models.Q(('client__isnull', False), ('invite__isnull', False), _connector='OR'), name='One of the client or invite should not be null'),
        ),
        migrations.AlterUniqueTogether(
            name='matter',
            unique_together={('mediator', 'code')},
        ),
        migrations.AlterUniqueTogether(
            name='lead',
            unique_together={('client', 'mediator')},
        ),
        migrations.AlterUniqueTogether(
            name='checklistentry',
            unique_together={('mediator', 'description')},
        ),
    ]
